function C(){const h=new WebSocket(`ws://${location.host}`);h.onopen=()=>setInterval(()=>h.send("ping"),5000),h.onmessage=(J)=>{if(J.data!=="Well received")console.log(J.data);if(J.data==="reload")location.reload()}}function o(...h){const J=[];for(let W of h){const $=document.getElementById(W);if($===null)return console.error(`Cannot get any HTML Element given the "${W}" id`),null;J.push($)}return J}function B(h){const J=o(h.canvasId,h.solutionSpaceSizePId,h.resetBtnId,h.gtBtnId,h.btBtnId,h.ncCheckboxId,h.acNoneRadioId,h.ac1RadioId,h.ac3RadioId,h.testedSolutionsPId,h.prunedSolutionsPId,h.progressPId,h.timeleftPId);if(J===null)return null;return{canvas:J[0],solutionSpaceSizeP:J[1],resetBtn:J[2],gtBtn:J[3],btBtn:J[4],ncCheckbox:J[5],acNoneRadio:J[6],ac1Radio:J[7],ac3Radio:J[8],testedSolutionsP:J[9],prunedSolutionsP:J[10],progressP:J[11],timeleftP:J[12]}}function c(h){h.elements.canvas.onmousemove=(J)=>{J.stopPropagation();const{offsetX:W,offsetY:$}=J,q=Math.min(Math.floor(W/h.ui.cellSize),8),Q=Math.min(Math.floor($/h.ui.cellSize),8),X=h.getSelectedCell();document.onclick=()=>{if(X===null||X[0]!==q||X[1]!==Q)h.setSelectedCell([q,Q]),h.refreshGrid()}},h.elements.canvas.onmouseout=(J)=>{if(J.stopPropagation(),h.getSelectedCell()!==null)h.setSelectedCell(null),h.refreshGrid()},document.onkeyup=(J)=>{if(J.stopPropagation(),J.key>="1"&&J.key<="9"&&h.getSelectedCell()!==null){const W=parseInt(J.key);if(W%1===0)h.toggle(W)}},h.elements.resetBtn.onclick=(J)=>{h.app.reset()},h.elements.gtBtn.onclick=(J)=>{h.app.reset(),h.app.launchGTSolve()},h.elements.btBtn.onclick=(J)=>{h.app.reset(),h.app.launchBTSolve()}}function S(h){h.canvas.onmousemove=null,h.canvas.onmouseout=null,document.onkeyup=null}var i=function(h){const J=BigInt("999999999999");if(h<=J)return h.toString();else{const W=h.toString(),$=W.length,q=$-1;return`${W[0]+($>1?"."+W.substring(1,3):"")}e${q}`}};class E{h;J;W;$;q;Q;constructor(h,J,W,$,q,Q){this._app=h;this._solutionSpaceSizeP=J;this._testedSolutionsP=W;this._prunedSolutionsP=$;this._progressP=q;this._timeleftP=Q}display(){const h=this._app.solutionSpaceSize;if(typeof h==="undefined")return;this._solutionSpaceSizeP.innerText=`${i(h)}`;const{start:J,tested:W,pruned:$}=this._app.stats;this._testedSolutionsP.innerText=`${W}`,this._prunedSolutionsP.innerText=`${$}`}static create(h){return new E(h.app,h.solutionSpaceSizeP,h.testedSolutionsP,h.prunedSolutionsP,h.progressP,h.timeleftP)}}var F=getComputedStyle(document.documentElement);class L{h;J;static _ui=new WeakMap;_cellSize;static colorBackground=F.getPropertyValue("--neutral-white");static colorBackgroundHighlight=F.getPropertyValue("--brand-uno-background");static colorSelected=F.getPropertyValue("--brand-uno-hover");static colorText=F.getPropertyValue("--brand-uno");static colorTextLight=F.getPropertyValue("--brand-uno-light");static colorBorder=F.getPropertyValue("--sudoku-border");static colorBorderBold=F.getPropertyValue("--brand-uno");static colorSuccess=F.getPropertyValue("--signal-success");static colorSuccessBackground=F.getPropertyValue("--signal-success-background");static font=F.getPropertyValue("--font-family-primary");constructor(h,J){this._canvas=h;this._ctx=J;this._cellSize=Math.round(Math.min(h.width,h.height)/9)}static get(h){if(L._ui.has(h))return L._ui.get(h);const J=h.getContext("2d");if(J===null)return!1;const W=new L(h,J);return L._ui.set(h,W),W}get width(){return this._canvas.width}get height(){return this._canvas.height}get cellSize(){return this._cellSize}clearCanvas(){return this._ctx.fillStyle=L.colorBackground,this._ctx.fillRect(0,0,this.width,this.height),this}drawCell(h,J,W=this._cellSize,$=L.colorBorder,q){const Q=h*W,X=J*W;if(q)this._ctx.fillStyle=q,this._ctx.fillRect(Q+1,X+1,W-2,W-2);return this._ctx.strokeStyle=$,this._ctx.strokeRect(Q,X,W,W),this}drawRow(h,J){for(let W=0;W<9;W++)this.drawCell(W,h,this._cellSize,L.colorBorder,J);return this}drawColumn(h,J){for(let W=0;W<9;W++)this.drawCell(h,W,this._cellSize,L.colorBorder,J);return this}drawGroup(h,J,W){this.drawCell(h,J,this._cellSize*3,L.colorBorderBold,W);for(let $=0;$<3;$++)for(let q=0;q<3;q++)this.drawCell(h*3+$,J*3+q,this._cellSize,L.colorBorder);return this}drawCellValue(h,J,W){this._ctx.fillStyle=L.colorText,this._ctx.font=`600 48px ${L.font}`,this._ctx.textBaseline="middle",this._ctx.textAlign="center";const $=h*this._cellSize+Math.floor(this._cellSize*0.5),q=J*this._cellSize+Math.floor(this._cellSize*0.575);return this._ctx.fillText(W.toString(),$,q),this}drawCellDomain(h,J,W){this._ctx.fillStyle=L.colorTextLight,this._ctx.font=`400 14px ${L.font}`,this._ctx.textBaseline="top",this._ctx.textAlign="start";const $=Math.max(this._cellSize-2,Math.floor(this._cellSize*0.8)),q=Math.floor($/3),Q=Math.max(1,Math.floor(this._cellSize*0.1)),X=h*this._cellSize+Q,Y=J*this._cellSize+Q;for(let M=1;M<=9;M++){const T=W.has(M)?M:null,A=(M-1)%3,x=Math.floor((M-1)/3),_=X+q*A,k=Y+q*x;this._ctx.fillText(T!==null?T.toString():"",_,k)}return this}drawEmptyGrid(){this.clearCanvas();for(let h=0;h<3;h++)for(let J=0;J<3;J++)this.drawGroup(h,J);return this}colorizeSelectedStuff(h){if(h===null)return this;const J=[Math.floor(h[0]/3),Math.floor(h[1]/3)];return this.drawRow(h[1],L.colorBackgroundHighlight).drawColumn(h[0],L.colorBackgroundHighlight).drawGroup(J[0],J[1],L.colorBackgroundHighlight).drawCell(h[0],h[1],this._cellSize,L.colorBorder,L.colorSelected),this}drawVictory(){return this._ctx.fillStyle=L.colorSuccessBackground,this._ctx.fillRect(0,0,this.width,this.height),this._ctx.fillStyle=L.colorSuccess,this._ctx.font=`600 72px ${L.font}`,this._ctx.textBaseline="middle",this._ctx.textAlign="center",this._ctx.fillText("Victory !".toUpperCase(),this._canvas.width/2,this._canvas.height/2),this}}function D(h,J){return z.fromJSON(h,J)}function j(h){return z.getByName(h)}class z{static domains=new Map;_values;constructor(h=[]){this._values=new Set(h)}add(h){this._values.add(h)}del(h){this._values.delete(h)}has(h){return this._values.has(h)}copy(h){const J=new z(this.toJSON());return z.domains.set(h,J),J}toJSON(){const h=[];for(let J of this._values)h.push(J);return h}getSize(){return this._values.size}static validateJSON(h){if(Array.isArray(h)&&h.length>0){const J=typeof h[0];if(!h.reduce(($,q)=>$&&typeof q===J,!0))return!1}return!0}static fromJSON(h,J){if(z.validateJSON(J)){const W=new z(J);return z.domains.set(h,W),W}throw new Error("At least one element do not have the same type as the other")}static getByName(h){return z.domains.get(h)}}function P(h,J){return g.fromJSON(h,J)}function G(h){return g.getByName(h)}class g{h;J;W;static variables=new Map;_value;constructor(h,J,W){this._name=h;this._domainName=J;this._domain=W}get name(){return this._name}get domain(){return this._domain}get value(){return this._value}set(h){if(this._domain.has(h))this._value=h}unset(){this._value=void 0}isSet(){return typeof this._value!=="undefined"}toJSON(){const h={domain:this._domainName};if(this.isSet())h.value=this._value;return h}static fromJSON(h,J){const W=j(J.domain);if(typeof W==="undefined")throw new Error(`The variable "${h}" reference an unknown domain "${J.domain}"`);const $=new g(h,J.domain,W.copy(`${h}-domain`));return g.variables.set(h,$),$}static getByName(h){return g.variables.get(h)}}class Z{h;static constraints=new Map;constructor(h){this._name=h}get name(){return this._name}static getByName(h){return Z.constraints.get(h)}}class H extends Z{J;W;static type="intension";static arity=1;constructor(h,J,W){super(h);this._v=J;this._checkConsistency=W}get type(){return H.type}get arity(){return H.arity}get variableName(){return this._v.name}checkConsistency(){return this._v.isSet()&&this._checkConsistency(this._v.value)}toJSON(){return{type:H.type,arity:H.arity,variable:this._v.name,valueConsistency:this._checkConsistency.toString()}}static create(h,J){const W=G(J.variable);if(!W)throw new Error(`The constraint "${h}" refer to an unknown variable "${J.variable}"`);const $=new H(h,W,J.valueConsistency);return Z.constraints.set(h,$),$}static fromJSON(h,J){const W=new Function(`return ${J.valueConsistency}`)(),$={...J,valueConsistency:W};return H.create(h,$)}}class R extends Z{J;static type="extension";static arity=1;_index;_areSupports;_areConflicts;constructor(h,J,W,$){super(h);this._v=J;this._index=new Set(W.filter((q)=>J.domain.has(q))),this._areSupports=$==="supports",this._areConflicts=$==="conflicts"}get type(){return R.type}get arity(){return R.arity}get variableName(){return this._v.name}checkConsistency(){if(!this._v.isSet())return!1;return this._index.has(this._v.value)?this._areSupports:this._areConflicts}toJSON(){const h=[];for(let J of this._index.values())h.push(J);return{type:R.type,arity:R.arity,variable:this._v.name,values:h,valuesType:this._areSupports?"supports":"conflicts"}}static create(h,J){const W=G(J.variable);if(!W)throw new Error(`The constraint "${h}" refer to an unknown variable "${J.variable}"`);const $=new R(h,W,J.values,J.valuesType);return Z.constraints.set(h,$),$}static fromJSON(h,J){return R.create(h,J)}}function s(h){return h.type===H.type}function a(h){return h.type===H.type}function d(h,J){return s(J)?H.fromJSON(h,J):R.fromJSON(h,J)}function v(h,J){return a(J)?H.create(h,J):R.create(h,J)}var I=1;class w extends Z{J;W;static type="intension";static arity=2;constructor(h,J,W){super(h);this._v=J;this._checkConsistency=W}get type(){return w.type}get arity(){return w.arity}get variableNames(){return[this._v[0].name,this._v[1].name]}checkConsistency(){const[h,J]=this._v;return h.isSet()&&J.isSet()&&this._checkConsistency(h.value,J.value)}toJSON(){return{type:w.type,arity:w.arity,variables:this.variableNames,valuesConsistency:this._checkConsistency.toString()}}static create(h,J){const[W,$]=J.variables,q=G(W),Q=G($);if(!(q&&Q))throw new Error(`The constraint "${h}" refers to the variables "${W}" and "${$}" but one of them is unknown`);const X=new w(h,[q,Q],J.valuesConsistency);return Z.constraints.set(h,X),X}static fromJSON(h,J){const W=new Function(`return ${J.valuesConsistency}`)(),$={...J,valuesConsistency:W};return w.create(h,$)}}class O extends Z{J;static type="extension";static arity=2;_index;_areSupports;_areConflicts;constructor(h,J,W,$){super(h);this._v=J;const q=W.filter((Q)=>J[0].domain.has(Q[0])&&J[1].domain.has(Q[1]));this._index=new Map;for(let Q=0;Q<q.length;Q++){const[X,Y]=q[Q];if(!this._index.has(X))this._index.set(X,new Set);this._index.get(X).add(Y)}this._areSupports=$==="supports",this._areConflicts=$==="conflicts"}get type(){return O.type}get arity(){return O.arity}get variableNames(){return[this._v[0].name,this._v[1].name]}checkConsistency(){const[h,J]=this._v;if(!(h.isSet()&&J.isSet()))return!1;const W=this._index.get(h.value);return W&&W.has(J.value)?this._areSupports:this._areConflicts}toJSON(){const h=[];for(let J of this._index.keys())for(let W of this._index.get(J).values())h.push([J,W]);return{type:O.type,arity:O.arity,variables:this.variableNames,tuples:h,tuplesType:this._areSupports?"supports":"conflicts"}}static create(h,J){const[W,$]=J.variables,q=G(W),Q=G($);if(!(q&&Q))throw new Error(`The constraint "${h}" refers to the variables "${W}" and "${$}" but one of them is unknown`);const X=new O(h,[q,Q],J.tuples,J.tuplesType);return Z.constraints.set(h,X),X}static fromJSON(h,J){return O.create(h,J)}}function e(h){return h.type===w.type}function n(h){return h.type===w.type}function p(h,J){return e(J)?w.fromJSON(h,J):O.fromJSON(h,J)}function u(h,J){return n(J)?w.create(h,J):O.create(h,J)}function hh(h){return h.arity===I}function Jh(h){return h.arity===I}function m(h,J){return hh(J)?d(h,J):p(h,J)}function f(h,J){return Jh(J)?v(h,J):u(h,J)}class V{h;J;W;$;_solutionSpaceSize;constructor(h,J,W,$){this._name=h;this._domains=J;this._variables=W;this._constraints=$;this._solutionSpaceSize=this.computeSolutionSpaceSize()}get name(){return this._name}get solutionsSpaceSize(){return this._solutionSpaceSize}get domains(){return this._domains}get variables(){return this._variables}get constraints(){return this._constraints}static bigintRatio(h,J){const W=this.simplifyFraction(h,J);return W[0]<=Number.MAX_SAFE_INTEGER&&W[1]<=Number.MAX_SAFE_INTEGER?Number(W[0])/Number(W[1]):W}computeSolutionSpaceSize(){let h=1n,J=0n;for(let W of this._variables.values())J=h*BigInt(W.domain.getSize()),h=J;return J}static pgcd(h,J){if(h===0n||J===0n)return 1n;const W=h>J?h:J,$=h<=J?h:J,q=W/$,Q=W%$;return Q===0n?q:this.pgcd(q,Q)}static simplifyFraction(h,J){let W=h,$=J,q=this.pgcd(W,$);while(q>1n)W=W/q,$=$/q,q=this.pgcd(W,$);return[W,$]}toJSON(){const h={};for(let[$,q]of this._domains.entries())h[$]=q.toJSON();const J={};for(let[$,q]of this._variables.entries())J[$]=q.toJSON();const W={};for(let[$,q]of this._constraints.entries())W[$]=q.toJSON();return{name:this._name,domains:h,variables:J,constraints:W}}setAffectation(h){for(let J in h){const W=this._variables.get(J),$=h[J];if(W?.domain.has($))W.set($)}}unsetAffectation(h){for(let J in h){const W=this._variables.get(J);if(W?.isSet())W.unset()}}static propsToDomains(h){const J=new Map;for(let W in h.domains)J.set(W,D(W,h.domains[W]));return J}static propsToVariables(h){const J=new Map;for(let W in h.variables)J.set(W,P(W,h.variables[W]));return J}static propsToConstraints(h){const J=new Map;for(let W in h.constraints)J.set(W,m(W,h.constraints[W]));return J}static fromJSON(h){return new V(h.name,V.propsToDomains(h),V.propsToVariables(h),V.propsToConstraints(h))}}class y{h;_workingProblem;_solving=!1;constructor(h){this._initialProblem=h}get solving(){return this._solving}copyProblem(h){const J=h.toJSON();return V.fromJSON(J)}*_gtAffectation(){const h=[];for(let q of this._workingProblem.variables.keys())h.push(q);const J=[];for(let q of h){const X=this._workingProblem.variables.get(q).domain.toJSON();if(X.length===0)return;J.push([q,0,X])}const W=J.reduce((q,[Q,X,Y])=>q+Y.length,0);let $=0;while($<W&&this._solving){const q={};for(let[Q,X,Y]of J)q[Q]=Y[X];yield q,$=0;for(let Q=J.length-1;Q>=0;Q--){const[X,Y,M]=J[Q];if(Y<M.length-1){J[Q][1]++,$+=J[Q][1];break}else J[Q][1]=0}}}*gt(h=!0,J=!1){this._solving=!0,this._workingProblem=this.copyProblem(this._initialProblem);for(let W of this._gtAffectation()){if(!this._solving)return;const $=this._gtIsConsistent(W);if($||J)yield[W,$];if($&&h)return}}_gtIsConsistent(h){if(!this._workingProblem)return!1;this._workingProblem.setAffectation(h);for(let J of this._workingProblem.constraints.values())if(!J.checkConsistency())return!1;return this._workingProblem.unsetAffectation(h),!0}stop(){this._solving=!1}static create(h){return new y(h.problem)}}class K extends V{q;static baseCellDomain=D("baseCellDomain",[1,2,3,4,5,6,7,8,9]);static mustBeDifferent=(h,J)=>h!==J;constructor(h,J,W,$,q){super(h,J,W,$);this._ui=q}static prepareDomains(){const h=new Map,J=[];for(let W=0;W<9;W++){const $=[];for(let q=0;q<9;q++){const Q=`d:${q}x${W}`,X=K.baseCellDomain.copy(Q);h.set(Q,X),$.push(Q)}J.push($)}return[h,J]}static vName(h,J){return`cell${h}x${J}`}static prepareVariables(h){const J=[],W=new Map;for(let $=0;$<9;$++){const q=[];for(let Q=0;Q<9;Q++){const X=h[$][Q],Y=K.vName(Q,$),M=P(Y,{domain:X});W.set(Y,M),q.push(Y)}J.push(q)}return[W,J]}static rule(h,J){return{type:"intension",arity:2,variables:[h,J],valuesConsistency:K.mustBeDifferent}}static prepareConstraints(h){const J=new Map;for(let W=0;W<9;W++)for(let $=0;$<9;$++)for(let q=$+1;q<9;q++){let Q=`c:${$}x${W}->${q}x${W}`,X=K.rule(h[W][$],h[W][q]),Y=f(Q,X);J.set(Q,Y),Q=`c:${W}x${$}->${W}x${q}`,X=K.rule(h[$][W],h[q][W]),Y=f(Q,X),J.set(Q,Y)}for(let W=0;W<9;W++){const $=W%3,q=(W-$)/3%3;for(let Q=0;Q<9;Q++){const X=Q%3,Y=$+X,M=(Q-X)/3%3,T=q+M;for(let A=Q;A<9;A++){const x=A%3,_=$+x,k=(A-x)/3%3,U=q+k,b=`c:${Y}x${T}->${_}x${U}`,r=K.rule(h[T][Y],h[U][_]),t=f(b,r);J.set(b,t)}}}return J}static create(h){const[J,W]=K.prepareDomains(),[$,q]=K.prepareVariables(W),Q=K.prepareConstraints(q);return new K(h.name,J,$,Q,h.ui)}_getVariable(h,J){const W=K.vName(h,J);return this._variables.get(W)}_drawCellContent(h,J){const W=this._getVariable(h,J);if(W)if(W.isSet())this._ui.drawCellValue(h,J,W.value);else this._ui.drawCellDomain(h,J,W.domain)}cellIsSet(h,J){return this._getVariable(h,J)?.isSet()??!1}domainHas(h,J,W){return this._getVariable(h,J)?.domain.has(W)??!1}drawCellsContent(){for(let h=0;h<9;h++)for(let J=0;J<9;J++)this._drawCellContent(J,h)}setCellValue(h,J,W){this._getVariable(h,J)?.set(W)}unsetCellValue(h,J){this._getVariable(h,J)?.unset()}getCellValue(h,J){return this._getVariable(h,J)?.value}_removeValue(h,J,W){this._getVariable(h,J)?.domain.del(W)}_addValue(h,J,W){this._getVariable(h,J)?.domain.add(W)}maintainImpactedCellsDomain(h,J,W,$){const q=$?this._removeValue.bind(this):this._addValue.bind(this);for(let Y=0;Y<9;Y++){if(Y!==h)q&&q(Y,J,W);if(Y!==J)q&&q(h,Y,W)}const Q=Math.floor(h/3),X=Math.floor(J/3);for(let Y=0;Y<3;Y++)for(let M=0;M<3;M++){const T=Q*3+M,A=X*3+Y;if(T!==h&&A!==J)q&&q(T,A,W)}}}class N{h;J;selectedCell=null;_problem;_statsDisplay;_solver;_iterationsMin=0;_iterationsMax=0;_lastTime=0;_startTime=0;_minDt=Number.MAX_SAFE_INTEGER;_handleRefreshStats=null;_solverSteps;_testedSolutions=0n;_prunedSolutions=0n;_gtIterator=null;constructor(h,J){this._ui=h;this._elements=J}get solutionSpaceSize(){return this._problem?.solutionsSpaceSize}get stats(){return{start:this._startTime,tested:this._testedSolutions,pruned:this._prunedSolutions}}_refreshGrid(){this._ui.drawEmptyGrid().colorizeSelectedStuff(this.selectedCell),this._problem?.drawCellsContent()}_toggle(h){if(!this._problem)return;const[J,W]=this.selectedCell;if(!this._problem.cellIsSet(J,W)){if(this._problem?.domainHas(J,W,h)??!1)this._problem?.setCellValue(J,W,h),this._problem?.maintainImpactedCellsDomain(J,W,h,!0),this._refreshGrid()}else if(this._problem?.getCellValue(J,W)===h){this._problem?.unsetCellValue(J,W),this._problem?.maintainImpactedCellsDomain(J,W,h,!1);for(let $=0;$<9;$++)for(let q=0;q<9;q++)if(this._problem?.getCellValue(q,$)===h)this._problem?.maintainImpactedCellsDomain(q,$,h,!0);this._refreshGrid()}}start(){if(c({app:this,elements:this._elements,ui:this._ui,refreshGrid:this._refreshGrid.bind(this),toggle:this._toggle.bind(this),getSelectedCell:()=>this.selectedCell,setSelectedCell:(h)=>this.selectedCell=h}),this._problem=K.create({name:`sudoku-${Date.now()}`,ui:this._ui}),this._refreshGrid(),!this._solver)this._solver=y.create({problem:this._problem});if(typeof this._statsDisplay==="undefined")this._statsDisplay=E.create({app:this,solutionSpaceSizeP:this._elements.solutionSpaceSizeP,testedSolutionsP:this._elements.testedSolutionsP,prunedSolutionsP:this._elements.prunedSolutionsP,progressP:this._elements.progressP,timeleftP:this._elements.timeleftP});this._statsDisplay.display()}stop(){if(this._solver?.stop(),this._gtIterator=null,this._lastTime=0,this._solverSteps=void 0,S(this._elements),this._elements.ncCheckbox.checked=!1,this._elements.acNoneRadio.checked=!0,this._handleRefreshStats!==null)clearInterval(this._handleRefreshStats),this._handleRefreshStats=null}reset(){this.stop(),this.start()}_computeSolvingIterations(h){const J=h-this._lastTime;if(J*0.9<=this._minDt/2)this._iterationsMax*=2,this._iterationsMin*=2;else if(J*0.9<=this._minDt)this._iterationsMin=Math.floor(this._iterationsMin*1.5),this._iterationsMax=Math.max(this._iterationsMin+1,this._iterationsMax);else if(J*1.1>=this._minDt*2)this._iterationsMin=Math.max(Math.floor(this._iterationsMin/2),1),this._iterationsMax=Math.max(Math.floor(this._iterationsMax/2),2);else if(J*1.1>=this._minDt)this._iterationsMax=Math.ceil(this._iterationsMax*0.67),this._iterationsMin=Math.min(this._iterationsMax-1,this._iterationsMin);return this._minDt=Math.min(this._minDt,J),this._lastTime=h,Math.max(Math.floor((this._iterationsMax+this._iterationsMin)/2),1)}launchGTSolve(){if(!this._solver||this._solver.solving||!this._problem)return;if(this._startTime=Date.now(),this._testedSolutions=0n,this._prunedSolutions=0n,this._minDt=Number.MAX_SAFE_INTEGER,this._iterationsMin=1,this._iterationsMax=1000,this._handleRefreshStats===null)this._handleRefreshStats=setInterval(()=>{this._statsDisplay?.display()},500);if(this._solverSteps=(h)=>{let J=null;for(let W=0;W<h;W++){const[$,q]=this._gtIterator.next().value;if(J=$,this._testedSolutions++,q){this._gtIterator=null;break}}if(J)this._problem.setAffectation(J)},this._gtIterator===null)this._gtIterator=this._solver.gt(!0,!0);this._animateSolve(1000)}launchBTSolve(){if(!this._solver||this._solver.solving||!this._problem)return;this._startTime=Date.now(),this._testedSolutions=0n,this._prunedSolutions=0n,this._minDt=Number.MAX_SAFE_INTEGER,this._animateSolve(1000)}_animateSolve(h){if(this._solverSteps){if(this._solverSteps(this._computeSolvingIterations(h)),this._refreshGrid(),this._solver?.solving)requestAnimationFrame(this._animateSolve.bind(this))}}static create(h){const J=B(h);if(J===null)return null;const W=L.get(J.canvas);if(!W)return null;return new N(W,J)}}var Wh="sudokuCanvas",$h="sudokuSolutionsSize",qh="reset",Qh="GT",Xh="BT",Yh="NC",Lh="ACNone",Mh="AC1",Zh="AC3",Kh="testedSolutions",Hh="prunedSolutions",wh="progress",Fh="timeleft";C();var l=N.create({canvasId:Wh,solutionSpaceSizePId:$h,resetBtnId:qh,gtBtnId:Qh,btBtnId:Xh,ncCheckboxId:Yh,acNoneRadioId:Lh,ac1RadioId:Mh,ac3RadioId:Zh,testedSolutionsPId:Kh,prunedSolutionsPId:Hh,progressPId:wh,timeleftPId:Fh});l&&l.start();
